<UserControl x:Class="ACViewer.View.ClothingTableList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:ACViewer.ViewModels"
             xmlns:local="clr-namespace:ACViewer.View">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="210" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <DockPanel Grid.ColumnSpan="1" LastChildFill="False" Margin="2,2,2,4">
            <WrapPanel x:Name="ToolbarWrap" Orientation="Horizontal" ItemHeight="24" ItemWidth="Auto">
                <Button Margin="0,0,4,4" Command="{Binding NewClothingCommand}"><TextBlock Text="New"/></Button>
                <Button Margin="0,0,4,4" Command="{Binding CloneClothingCommand}"><TextBlock Text="Clone"/></Button>
                <Button Margin="0,0,4,4" Command="{Binding DeleteClothingCommand}"><TextBlock Text="Delete"/></Button>
                <Separator Width="1" Margin="0,0,4,4" />
                <Button Margin="0,0,4,4" Command="{Binding AddSubPaletteEffectCommand}"><TextBlock Text="Add SubEffect"/></Button>
                <Button Margin="0,0,4,4" Command="{Binding AddCloSubPaletteCommand}"><TextBlock Text="Add SubPalette"/></Button>
                <Separator Width="1" Margin="0,0,4,4" />
                <Button Margin="0,0,4,4" Width="34" Command="{Binding IncreaseScaleCommand}"><TextBlock Text="A+"/></Button>
                <Button Margin="0,0,4,4" Width="34" Command="{Binding DecreaseScaleCommand}"><TextBlock Text="A-"/></Button>
            </WrapPanel>
        </DockPanel>

        <!-- Main content (previously left pane only). The removed right editor is now provided exclusively by popup dialog. -->
        <ScrollViewer Grid.Row="1" Grid.Column="0" Margin="4,0,4,4" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <StackPanel Width="200">
                <Expander IsExpanded="True" Header="Clothing Items" Margin="0,0,0,4">
                    <ListBox ItemsSource="{Binding ClothingItems}" SelectedItem="{Binding SelectedClothing}" DisplayMemberPath="DisplayName" Height="150" />
                </Expander>
                <Expander IsExpanded="True" Header="Setup &amp; Palettes" Margin="0,0,0,4">
                    <StackPanel>
                        <ListBox Name="SetupIds" Margin="0,4,0,0" SelectionChanged="SetupIDs_OnClick" Height="100"/>
                        <ListBox Name="PaletteTemplates" Margin="0,4,0,0" SelectionChanged="PaletteTemplates_OnClick" Height="140" />
                        <Slider Name="Shades" Margin="0,4,0,0" IsEnabled="False" ValueChanged="Shades_ValueChanged" SmallChange="1" IsSnapToTickEnabled="True" />
                        <Label x:Name="lblShade" Content="Shade: 0" HorizontalAlignment="Left" Margin="0,2,0,0"/>
                        <Button Content="Import JSON..." Margin="0,6,0,0" Click="BtnImportJson_Click" />
                    </StackPanel>
                </Expander>
                <Expander IsExpanded="True" Header="Effects Tree" Margin="0,0,0,4">
                    <TreeView ItemsSource="{Binding SelectedClothing.BaseEffects}" SelectedItemChanged="Tree_SelectedItemChanged" Height="300" />
                </Expander>
            </StackPanel>
        </ScrollViewer>

        <TextBlock Grid.Row="2" Grid.ColumnSpan="1" Margin="4" Foreground="Gray" FontSize="10" Text="Palette editing opens in its own window."/>
    </Grid>
</UserControl>
